import { useState } from 'react';
import Header from "./components/Header/Header";
import SearchBar from "./components/SearchBar/SearchBar";
import SearchResults from "./components/SearchResults/SearchResults";
import Footer from "./components/Footer/Footer";
import NewsList from "./components/NewsList/NewsList"
import { Spinner } from 'react-bootstrap';

// Simulación de resultados Web
const mockWebResults = [
  {
    id: 'web-1',
    type: 'web',
    title: 'Últimas tendencias en React 2026',
    description: 'React 2026 trae nuevas funcionalidades como ...',
    url: 'https://midu.dev/blog/react-2026'
  },
  {
    id: 'web-2',
    type: 'web',
    title: 'JavaScript moderno: ES2026',
    description: 'Repasamos las nuevas características del estándar ES2026...',
    url: 'https://dev.to/es2026-javascript'
  }
];

// Simulación de resultados YouTube
const mockYoutubeResults = [
  {
    id: 'yt-1',
    type: 'youtube',
    title: 'Canal Midudev: Novedades Frontend',
    url: 'https://www.youtube.com/channel/UCu3pZ9Tj2dP0Z2B1o8',
    thumbnail: 'https://i.ytimg.com/vi/VIDEO_ID/default.jpg'
  },
  {
    id: 'yt-2',
    type: 'youtube',
    title: 'React Native 2026 - Tutorial',
    url: 'https://www.youtube.com/channel/UCu3pZ9Tj2dP0Z2B1o9',
    thumbnail: 'https://i.ytimg.com/vi/VIDEO_ID2/default.jpg'
  }
];

function App() {
  const [results, setResults] = useState([]);
  const [loading, setLoading] = useState(false);

  const handleSearch = (query) => {
    setResults([]);
    setLoading(true);

    // Simular delay de búsqueda (como si viniera de API)
    setTimeout(() => {
      const filteredWeb = mockWebResults.filter(item =>
        item.title.toLowerCase().includes(query.toLowerCase())
      );

      const filteredYT = mockYoutubeResults.filter(item =>
        item.title.toLowerCase().includes(query.toLowerCase())
      );

      // Primero Web, luego YouTube
      setResults([...filteredWeb, ...filteredYT]);
      setLoading(false);
    }, 1200); // 1.2 segundos de simulación de carga
  };

  return (
    <>
      <Header />
      <NewsList/>
      <SearchBar onSearch={handleSearch} />

      {loading && (
        <div className="text-center my-4">
          <Spinner animation="border" variant="primary" role="status">
            <span className="visually-hidden">Cargando resultados...</span>
          </Spinner>
          <p className="mt-2 text-muted">Buscando en Web y YouTube...</p>
        </div>
      )}

      {!loading && <SearchResults results={results} />}
      <Footer />
    </>
  );
}

export default App;
